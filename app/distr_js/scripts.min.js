"use strict";function ajax(e,o,t,c){var n=new XMLHttpRequest;n.open(o,e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(requestData(c)),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&t(this.response)}}function requestData(e){var o="";for(var t in e)o+="".concat(t,"=").concat(e[t],"&");return console.log(o),o}function showModal(){var e=this.dataset.modal;document.querySelector(e).classList.remove("hide"),document.onkeydown=function(e){27==e.keyCode&&closeModal()}}function closeModal(){document.querySelectorAll(".modal-wrap").forEach(function(e){e.classList.add("hide")}),document.onkeydown=null}document.querySelector("#signup-submit").onclick=function(e){e.preventDefault();for(var o=document.querySelector("#signup-name").value,t=document.querySelector("#signup-pass").value,c=document.querySelector("#signup-email").value,n=document.querySelector("#signup-birthday").value,l=document.querySelectorAll(".sex"),a=0;a<l.length;a++)if(l[a].checked){l=l[a].value;break}ajax("core/signup.php","POST",function(e){console.log(e),2==e?M.toast({html:"Заполните поля"}):1==e?(M.toast({html:"Успех. Теперь можно войти!"}),closeModal()):M.toast({html:"Ошибка, повторите регистрацию позже!"})},{name:o,pass:t,email:c,birthday:n,sex:l})},document.querySelector("#login-submit").onclick=function(e){e.preventDefault(),ajax("core/login.php","POST",function(e){if(console.log(e),2==e)M.toast({html:"Заполните поля"});else if(0==e)M.toast({html:"Такой пользователь не найден!"});else{e=JSON.parse(e);var o=new Date;o.setTime(o.getTime()+6e5);var t=o.toUTCString();document.cookie="email=".concat(e.email,"; expires=").concat(t,"; path=/"),location.href="cabinet.php"}},{pass:document.querySelector("#login-pass").value,email:document.querySelector("#login-email").value})},document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".datepicker");M.Datepicker.init(e,{format:"yyyy-mm-dd"})}),document.querySelectorAll(".modal-project-close").forEach(function(e){e.onclick=closeModal}),document.querySelectorAll(".modal-wrap").forEach(function(e){e.onclick=closeModal}),document.querySelectorAll(".modal-show").forEach(function(e){e.onclick=showModal}),document.querySelector("#log-in .modal-project").onclick=function(e){e.stopPropagation()},document.querySelector("#sign-up .modal-project").onclick=function(e){e.stopPropagation()},document.querySelector(".read-rule").onclick=function(){document.querySelector(".form-slider").style.marginLeft="-355px"},document.querySelector(".read-rule-back").onclick=function(){document.querySelector(".form-slider").style.marginLeft="0"},document.querySelector("#agree-rules").onchange=function(){this.checked?document.querySelector("#signup-submit").classList.remove("disabled"):document.querySelector("#signup-submit").classList.add("disabled")};